{"version":3,"sources":["logo.js","logged-out.js","total-header.js","voyageur-api.js","private-vars.js","react-auth0-wrapper.js","notices.js","voyageur-sync.js","target-list.js","use-key-code.js","source-list.js","item-detail.js","main-toolbar.js","local-storage.js","scroll-to-item.js","logged-in.js","style.js","app.js","createServiceWorker.js","index.js","logo-small.png","google.png"],"names":["Logo","className","src","logo","alt","LoggedOut","classes","logIn","loginError","Container","loggedOutRoot","elevation","loggedOut","loggedOutHeader","CardHeader","title","subheader","loggedOutLogo","Divider","loggedOutError","toString","Button","color","onClick","fullWidth","size","variant","TotalHeader","totalDistance","isLoading","isError","clearItems","Fragment","Icon","fontSize","totalHeaderIcon","DistanceString","IconButton","root","totalHeaderButton","aria-label","content","totalHeaderContent","totalHeaderDistance","baseUrl","listLocations","token","Error","Promise","resolve","reject","listLocationsUrl","request","get","set","end","err","res","data","body","createNewLocation","params","url","post","send","deleteLocationFromLibrary","location","id","delete","updateLocationParams","put","getDistanceBetween","start","dest","DEFAULT_REDIRECT_CALLBACK","window","history","replaceState","document","pathname","Auth0Context","React","createContext","useAuth0","useContext","NoticeContext","currentNotice","useNotices","setCurrentNotice","showError","useCallback","message","detailedMessage","console","log","type","NoticesProvider","children","useState","noticeData","Provider","value","Notices","areDetailsVisible","setDetailsVisible","action","messageText","Snackbar","anchorOrigin","vertical","horizontal","open","onClose","SnackbarContent","noticeBox","noticeError","noticeInfo","aria-describedby","useVoyageurSync","useReducer","voyageurSyncReducer","items","serverItems","serverItemsLoading","serverItemsError","state","dispatch","getTokenSilently","useEffect","fetchItemsFromServer","catch","error","syncItemsToServer","newItems","payload","translateRemoteItems","map","item","label","name","address","_id","translateItemToRemote","areArraysEmpty","arrays","filter","array","length","serverItemIds","clientItemIds","array1","array2","includes","a","itemsToAddToServer","itemsToDeleteFromServer","itemsToReplaceOnServer","clientItem","matchingItem","find","serverItem","all","locations","getAddressPairs","prevLocation","reduce","pairs","push","TargetList","removeFromTarget","targetListRef","setLoading","setIsError","totalMeters","setTotalMeters","distances","total","distance","getDistances","useDistance","toFixed","paddedItems","targetItemId","itemElements","useTransition","config","clamp","friction","from","opacity","transform","maxHeight","enter","leave","next","index","props","key","div","style","TargetListItem","itemNumber","TargetListItemConnector","Paper","square","targetListBox","targetListHeaderDivider","List","targetList","ref","targetListItemConnector","ListItem","targetListItem","StepIcon","targetListItemDot","icon","ListItemText","ListItemSecondaryAction","removeButton","targetListItemEmpty","useKeyCode","keyCode","isKeyPressed","setKeyPressed","downHandler","event","preventDefault","addEventListener","removeEventListener","min","max","SourceList","sourceListRef","sendToTarget","showItemDetail","shouldShowGuide","createNewItem","active","searchValue","setSearchValue","highlighted","setHighlighted","visibleItems","setVisibleItems","doesItemMatchSearch","moveDown","moveUp","chooseCurrent","prev","highlightedItem","found","SourceListItem","hidden","searchItem","SourceListSearch","onChange","target","guideElement","GuideElement","addButton","sourceListAddButton","itemsWithSearch","sourceListBox","sourceListHeaderContent","LocationList","SourceListError","SourceListLoading","sourceList","EmptyLocationsList","emptyLocationsList","emptyLocationsListIcon","emptyLocationsListTitle","guideElementTitle","useRef","current","scrollIntoView","block","behavior","sourceListItem","ContainerProps","sourceListItemHidden","button","selected","primary","secondary","sourceListItemButton","searchIcon","TextField","autoComplete","toLowerCase","ItemDetail","newItem","deleteItem","isLocationEnabled","setLocationEnabled","Dialog","fullScreen","TransitionComponent","SlideTransition","ItemDetailContent","setAddress","itemName","setItemName","isShowingDeleteConfirm","setIsShowingDeleteConfirm","AppBar","itemDetailAppBar","Toolbar","edge","DialogTitle","itemDetailTitle","itemDetailButtonIcon","updatedItem","DialogContent","NameField","addressFieldContainer","AddressAutosuggestInput","PoweredByGoogle","ConfirmDeleteDialog","handleClose","aria-labelledby","DialogContentText","DialogActions","autoFocus","isTouched","setTouched","margin","google","useAutocompleteValue","search","service","suggestions","setSuggestions","input","queryOptions","radius","getQueryPredictions","predictions","description","getSuggestionsFor","then","clearSuggestions","debouncedValue","delay","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","setGoogle","onLoad","alert","script","createElement","headScript","getElementsByTagName","parentNode","insertBefore","useGoogleApi","setService","maps","places","AutocompleteService","useGoogleAutocomplete","enabled","setLocation","isSubscribed","navigator","geolocation","getCurrentPosition","position","LatLng","coords","latitude","longitude","useCurrentGoogleLocation","SuggestionList","FormControlLabel","control","Checkbox","checked","suggestionList","suggestion","SuggestionItem","isHighlighted","MenuItem","component","forwardRef","Slide","direction","MainToolbar","logOut","accountMenuRef","accountMenuOpen","setAccountMenuOpen","mainToolbar","mainToolbarToolbar","Typography","mainToolbarTitle","aria-controls","aria-haspopup","UserMenu","targetRef","Menu","anchorEl","keepMounted","transformOrigin","useLocalStorageState","initialValue","setState","storedValue","localStorage","getItem","JSON","parse","newValue","encodedValue","stringify","setItem","useScrollToItem","listRef","prevSavedItems","lastElementChild","LoggedIn","setItems","tripLocations","setTripLocations","itemDetail","isShowingAddItem","setIsShowingAddItem","setShowGuide","isOverlayVisible","loggedInRoot","loggedInMainContainer","it","targetItem","uniqueId","saved","updateItem","addNewItem","Date","now","Math","random","slice","useStyles","makeStyles","theme","backgroundColor","palette","dark","padding","display","flexDirection","height","flex","breakpoints","up","maxWidth","main","justifyContent","overflowY","contrastText","order","overflowX","WebkitOverflowScrolling","borderBottomRightRadius","borderBottomLeftRadius","shape","borderRadius","borderTopLeftRadius","minHeight","borderRight","left","top","paddingLeft","borderBottom","backgroundClip","marginRight","spacing","verticalAlign","zIndex","width","container","suggestionsContainerOpen","right","marginTop","topLogo","bottomLogo","alignItems","minWidth","boxSizing","loading","fontWeight","voyageurBlue","light","voyageurGrey","App","isAuthenticated","loginWithRedirect","logout","MainArea","CircularProgress","returnTo","href","swUrl","process","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","render","onRedirectCallback","initOptions","setIsAuthenticated","user","setUser","auth0Client","setAuth0","setError","popupOpen","setPopupOpen","createAuth0Client","auth0FromHook","handleRedirectCallback","appState","getUser","initAuth0","pushState","origin","loginWithPopup","getIdTokenClaims","getTokenWithPopup","domain","client_id","redirect_uri","audience","targetUrl","createMuiTheme","ThemeProvider","querySelector","module","exports"],"mappings":"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","file":"static/js/main.40cf9622.chunk.js","sourcesContent":["/* @format */\nimport React from 'react';\n\nimport logo from './logo-small.png';\n\nexport default function Logo({ className }) {\n  return <img src={logo} className={className} alt=\"Voyageur\" />;\n}\n","/* @format */\nimport Container from '@material-ui/core/Container';\nimport React from 'react';\nimport Card from '@material-ui/core/Paper';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\nimport Logo from './logo';\n\nexport default function LoggedOut({ classes, logIn, loginError }) {\n  return (\n    <Container className={classes.loggedOutRoot}>\n      <Card elevation={1} className={classes.loggedOut}>\n        <div className={classes.loggedOutHeader}>\n          <CardHeader title=\"Voyageur\" subheader=\"Log In\" />\n          <Logo className={classes.loggedOutLogo} />\n        </div>\n        <Divider />\n        <div>\n          {loginError && (\n            <div className={classes.loggedOutError}>\n              {loginError.toString()}\n            </div>\n          )}\n          <Button\n            color=\"primary\"\n            onClick={logIn}\n            fullWidth\n            size=\"large\"\n            variant=\"contained\">\n            Log in\n          </Button>\n        </div>\n      </Card>\n    </Container>\n  );\n}\n","/* @format */\nimport React from 'react';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\n\nexport default function TotalHeader({\n  totalDistance,\n  isLoading,\n  isError,\n  clearItems,\n  classes,\n}) {\n  const title = (\n    <React.Fragment>\n      <Icon fontSize=\"large\" className={classes.totalHeaderIcon}>\n        drive_eta\n      </Icon>\n      <DistanceString\n        isLoading={isLoading}\n        isError={isError}\n        totalDistance={totalDistance}\n      />\n    </React.Fragment>\n  );\n  const subheader = (\n    <React.Fragment>\n      <IconButton\n        classes={{ root: classes.totalHeaderButton }}\n        color=\"inherit\"\n        aria-label=\"clear trip\"\n        onClick={clearItems}>\n        <Icon fontSize=\"large\">delete_sweep</Icon>\n      </IconButton>\n    </React.Fragment>\n  );\n  return (\n    <CardHeader\n      classes={{\n        content: classes.totalHeaderContent,\n        subheader: classes.totalHeaderDistance,\n      }}\n      title={title}\n      subheader={subheader}\n    />\n  );\n}\n\nfunction DistanceString({ isLoading, totalDistance, isError }) {\n  if (isLoading) {\n    return 'Loading...';\n  }\n  if (isError) {\n    return 'Error';\n  }\n  return `${totalDistance} miles`;\n}\n","/* @format */\nimport request from 'superagent';\nimport { VOYAGEUR_API_SERVER } from './private-vars';\n\nconst baseUrl = `${VOYAGEUR_API_SERVER}`;\n\nexport function listLocations(token) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const listLocationsUrl = `${baseUrl}/secured/locations`;\n    request\n      .get(listLocationsUrl)\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (!data) return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n\nexport function createNewLocation(token, params) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const url = `${baseUrl}/secured/locations`;\n    request\n      .post(url)\n      .send(params)\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (!data) return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n\nexport function deleteLocationFromLibrary(token, location) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const url = `${baseUrl}/secured/locations/${location.id}`;\n    request\n      .delete(url)\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (!data) return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n\nexport function updateLocationParams(token, location, params) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const url = `${baseUrl}/secured/locations/${location.id}`;\n    request\n      .put(url)\n      .send(params)\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (!data) return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n\nexport function reorderLibrary(token, ids) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const url = `${baseUrl}/secured/locations`;\n    request\n      .put(url)\n      .send({ locations: ids })\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (!data) return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n\nexport function getDistanceBetween(token, start, dest) {\n  if (!token) {\n    throw new Error('Token is required');\n  }\n  return new Promise((resolve, reject) => {\n    const url = `${baseUrl}/secured/distances`;\n    request\n      .post(url)\n      .send({ start, dest })\n      .set('Authorization', `Bearer ${token}`)\n      .end((err, res) => {\n        if (err) return reject(err);\n        const data = res.body;\n        if (typeof data === 'undefined' || data === null)\n          return reject('No data found in response');\n        return resolve(data);\n      });\n  });\n}\n","export const VOYAGEUR_API_SERVER = 'https://voyageur-js.herokuapp.com';\nexport const AUTH0_CLIENT_ID = 'saw7VKvcDr5944HYpvvjdZCT0auGa066';\nexport const AUTH0_DOMAIN = 'foolord.auth0.com';\nexport const AUTH0_AUDIENCE = 'https://voyageur-js.herokuapp.com/';\n","// src/react-auth0-wrapper.js\nimport React, { useState, useEffect, useContext } from 'react';\nimport createAuth0Client from '@auth0/auth0-spa-js';\n\nconst DEFAULT_REDIRECT_CALLBACK = () =>\n  window.history.replaceState({}, document.title, window.location.pathname);\n\nexport const Auth0Context = React.createContext();\nexport const useAuth0 = () => useContext(Auth0Context);\n\nexport const Auth0Provider = ({\n  children,\n  onRedirectCallback = DEFAULT_REDIRECT_CALLBACK,\n  ...initOptions\n}) => {\n  const [isAuthenticated, setIsAuthenticated] = useState();\n  const [user, setUser] = useState();\n  const [auth0Client, setAuth0] = useState();\n  const [loading, setLoading] = useState(true);\n  const [loginError, setError] = useState();\n  const [popupOpen, setPopupOpen] = useState(false);\n\n  useEffect(() => {\n    const initAuth0 = async () => {\n      console.log('creating auth client');\n      const auth0FromHook = await createAuth0Client(initOptions);\n      setAuth0(auth0FromHook);\n\n      if (window.location.search.includes('code=')) {\n        console.log('parsing auth code');\n        const { appState } = await auth0FromHook.handleRedirectCallback();\n        console.log('calling redirect callback');\n        onRedirectCallback(appState);\n      }\n\n      console.log('checking for authentication');\n      const isAuthenticated = await auth0FromHook.isAuthenticated();\n      console.log('checking for authentication complete', isAuthenticated);\n\n      setIsAuthenticated(isAuthenticated);\n\n      if (isAuthenticated) {\n        const user = await auth0FromHook.getUser();\n        setUser(user);\n      }\n\n      setLoading(false);\n    };\n    initAuth0().catch(error => {\n      window.history.pushState({}, '', window.location.origin);\n      console.log('error during authentication', error);\n      setError(error);\n      setLoading(false);\n    });\n  }, []); // eslint-disable-line \n\n  const loginWithPopup = async (params = {}) => {\n    setPopupOpen(true);\n    try {\n      await auth0Client.loginWithPopup(params);\n    } catch (error) {\n      console.log('error during login', error);\n      setError(error);\n    } finally {\n      setPopupOpen(false);\n    }\n    const user = await auth0Client.getUser();\n    setUser(user);\n    setIsAuthenticated(true);\n  };\n\n  const handleRedirectCallback = async () => {\n    setLoading(true);\n    await auth0Client.handleRedirectCallback();\n    const user = await auth0Client.getUser();\n    setLoading(false);\n    setIsAuthenticated(true);\n    setUser(user);\n  };\n  return (\n    <Auth0Context.Provider\n      value={{\n        isAuthenticated,\n        user,\n        loading,\n        popupOpen,\n        loginWithPopup,\n        handleRedirectCallback,\n        getIdTokenClaims: (...p) => auth0Client.getIdTokenClaims(...p),\n        loginWithRedirect: (...p) => auth0Client.loginWithRedirect(...p),\n        getTokenSilently: (...p) => auth0Client.getTokenSilently(...p),\n        getTokenWithPopup: (...p) => auth0Client.getTokenWithPopup(...p),\n        logout: (...p) => auth0Client.logout(...p),\n        loginError,\n      }}>\n      {children}\n    </Auth0Context.Provider>\n  );\n};\n","/* @format */\nimport React, { useState, useCallback, useContext, createContext } from 'react';\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\n\nconst NoticeContext = createContext({ currentNotice: null });\n\nexport function useNotices() {\n  const { currentNotice, setCurrentNotice } = useContext(NoticeContext);\n\n  const showError = useCallback(\n    (message, detailedMessage) => {\n      console.log('Error!', message, detailedMessage);\n      setCurrentNotice({\n        type: 'error',\n        message: message.toString ? message.toString() : message,\n        detailedMessage:\n          detailedMessage && detailedMessage.toString\n            ? detailedMessage.toString()\n            : detailedMessage,\n      });\n    },\n    [setCurrentNotice],\n  );\n\n  return {\n    showError,\n    currentNotice,\n    setCurrentNotice,\n  };\n}\n\nexport function NoticesProvider({ children }) {\n  const [currentNotice, setCurrentNotice] = useState();\n  const noticeData = {\n    currentNotice,\n    setCurrentNotice,\n  };\n  return (\n    <NoticeContext.Provider value={noticeData}>\n      {children}\n    </NoticeContext.Provider>\n  );\n}\n\nexport function Notices({ classes }) {\n  const { currentNotice, setCurrentNotice } = useNotices();\n  const [areDetailsVisible, setDetailsVisible] = useState(false);\n\n  const { type = 'info', message = '', detailedMessage = '' } =\n    currentNotice || {};\n\n  const action =\n    !areDetailsVisible && detailedMessage ? (\n      <Button\n        color=\"inherit\"\n        size=\"small\"\n        onClick={() => setDetailsVisible(true)}>\n        details\n      </Button>\n    ) : null;\n\n  const messageText = areDetailsVisible ? (\n    <div>\n      <span id=\"client-snackbar\">{message}</span>\n      <p>Details: {detailedMessage}</p>\n    </div>\n  ) : (\n    <span id=\"client-snackbar\">{message}</span>\n  );\n\n  return (\n    <div>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'left',\n        }}\n        open={!!currentNotice}\n        onClose={() => {\n          setCurrentNotice();\n          setDetailsVisible(false);\n        }}>\n        <SnackbarContent\n          className={`${classes.noticeBox} ${\n            type === 'error' ? classes.noticeError : classes.noticeInfo\n          }`}\n          aria-describedby=\"client-snackbar\"\n          message={messageText}\n          action={action}\n        />\n      </Snackbar>\n    </div>\n  );\n}\n","/* @format */\nimport { useState, useEffect, useReducer } from 'react';\nimport {\n  listLocations,\n  createNewLocation,\n  deleteLocationFromLibrary,\n  updateLocationParams,\n  getDistanceBetween,\n} from './voyageur-api';\nimport { useAuth0 } from './react-auth0-wrapper';\nimport { useNotices } from './notices';\n\nexport default function useVoyageurSync() {\n  const [state, dispatch] = useReducer(voyageurSyncReducer, {\n    items: [],\n    serverItems: [],\n    serverItemsLoading: false,\n    serverItemsError: false,\n  });\n  console.log('voyageur sync', state);\n  const { showError } = useNotices();\n  const { getTokenSilently } = useAuth0();\n\n  const { items } = state;\n  const setItems = newItems =>\n    dispatch({ type: 'setItems', payload: newItems });\n\n  // Initial fetch\n  useEffect(() => {\n    fetchItemsFromServer({\n      getTokenSilently,\n      dispatch,\n    }).catch(error => {\n      dispatch({ type: 'errorLoading' });\n      showError(\n        \"I'm having trouble connecting to the server. Try reloading the page.\",\n        error,\n      );\n    });\n  }, [getTokenSilently, showError]);\n\n  useEffect(() => {\n    syncItemsToServer({\n      getTokenSilently,\n      dispatch,\n      state,\n    }).catch(error => {\n      dispatch({ type: 'errorLoading' });\n      showError(\n        \"I'm having trouble connecting to the server. Try reloading the page.\",\n        error,\n      );\n    });\n  }, [getTokenSilently, showError, state]);\n\n  return [items, setItems, state.serverItemsLoading, state.serverItemsError];\n}\n\nexport function useDistance(locations) {\n  const [isLoading, setLoading] = useState(false);\n  const [isError, setIsError] = useState(false);\n  const { showError } = useNotices();\n  const { getTokenSilently } = useAuth0();\n  const [totalMeters, setTotalMeters] = useState(0);\n  console.log('getting distance', locations);\n\n  useEffect(() => {\n    async function getDistances() {\n      setLoading(true);\n      console.log('fetching distance', locations);\n      const token = await getTokenSilently();\n      const distances = await Promise.all(\n        getAddressPairs(locations).map(({ start, dest }) => {\n          return getDistanceBetween(token, start, dest);\n        }),\n      );\n      console.log('distances calculated');\n      setTotalMeters(\n        distances.reduce((total, distance) => total + distance, 0),\n      );\n      setLoading(false);\n      setIsError(false);\n    }\n\n    getDistances().catch(error => {\n      showError(\n        \"I'm having trouble connecting to the server. Try reloading the page.\",\n        error,\n      );\n      setIsError(true);\n    });\n  }, [getTokenSilently, showError, locations]);\n\n  return { totalMeters, isLoading, isError };\n}\n\nfunction translateRemoteItems(items) {\n  return items.map(item => ({\n    label: item.name,\n    address: item.address,\n    id: item._id,\n  }));\n}\n\nfunction translateItemsToRemote(items) {\n  return items.map(item => ({\n    name: item.label,\n    address: item.address,\n  }));\n}\n\nfunction translateItemToRemote(item) {\n  return {\n    name: item.label,\n    address: item.address,\n  };\n}\n\nfunction areArraysEmpty(...arrays) {\n  return arrays.filter(array => array.length > 0).length === 0;\n}\n\nfunction doArraysDiffer(array1, array2) {\n  const diff1 = array1.filter(item => !array2.includes(item));\n  const diff2 = array2.filter(item => !array1.includes(item));\n  return !areArraysEmpty(diff1, diff2);\n}\n\nfunction voyageurSyncReducer(state, action) {\n  console.log('reducer action', action);\n  switch (action.type) {\n    case 'loadingItems':\n      return { ...state, serverItemsLoading: true };\n    case 'errorLoading':\n      return { ...state, serverItemsLoading: false, serverItemsError: true };\n    case 'setItems': {\n      return {\n        ...state,\n        items: action.payload,\n      };\n    }\n    case 'setServerItems': {\n      const serverItemIds = action.payload.map(item => item.id);\n      const clientItemIds = state.items.map(item => item.id);\n      return {\n        ...state,\n        serverItemsLoading: false,\n        serverItemsError: false,\n        serverItems: action.payload,\n        items: doArraysDiffer(serverItemIds, clientItemIds)\n          ? action.payload\n          : state.items,\n      };\n    }\n    default:\n      return state;\n  }\n}\n\nasync function syncItemsToServer({ getTokenSilently, dispatch, state }) {\n  const token = await getTokenSilently();\n  const serverItemIds = state.serverItems.map(item => item.id);\n  const clientItemIds = state.items.map(item => item.id);\n  const itemsToAddToServer = state.items.filter(\n    item => !serverItemIds.includes(item.id),\n  );\n  const itemsToDeleteFromServer = state.serverItems.filter(\n    item => !clientItemIds.includes(item.id),\n  );\n  const itemsToReplaceOnServer = state.items.filter(clientItem => {\n    const matchingItem = state.serverItems.find(\n      serverItem => clientItem.id === serverItem.id,\n    );\n    if (!matchingItem) {\n      return false;\n    }\n    return (\n      matchingItem.address !== clientItem.address ||\n      matchingItem.label !== clientItem.label\n    );\n  });\n  if (\n    areArraysEmpty(\n      itemsToAddToServer,\n      itemsToDeleteFromServer,\n      itemsToReplaceOnServer,\n    )\n  ) {\n    console.log('no changes to sync');\n    return;\n  }\n  console.log(\n    'syncing items with server; adding',\n    itemsToAddToServer,\n    'removing',\n    itemsToDeleteFromServer,\n    'changing',\n    itemsToReplaceOnServer,\n  );\n  await Promise.all([\n    ...translateItemsToRemote(itemsToAddToServer).map(item =>\n      createNewLocation(token, item),\n    ),\n    ...itemsToDeleteFromServer.map(item =>\n      deleteLocationFromLibrary(token, item),\n    ),\n    ...itemsToReplaceOnServer.map(item =>\n      updateLocationParams(token, item, translateItemToRemote(item)),\n    ),\n  ]);\n  const locations = await listLocations(token);\n  dispatch({\n    type: 'setServerItems',\n    payload: translateRemoteItems(locations),\n  });\n}\n\nasync function fetchItemsFromServer({ getTokenSilently, dispatch }) {\n  console.log('fetching items from server');\n  dispatch({ type: 'loadingItems' });\n  const token = await getTokenSilently();\n  const locations = await listLocations(token);\n  dispatch({\n    type: 'setServerItems',\n    payload: translateRemoteItems(locations),\n  });\n}\n\nfunction getAddressPairs(locations) {\n  let prevLocation = null;\n  return locations.reduce((pairs, location) => {\n    if (prevLocation) {\n      pairs.push({ start: prevLocation.address, dest: location.address });\n    }\n    prevLocation = location;\n    return pairs;\n  }, []);\n}\n","/* @format */\nimport React from 'react';\nimport Divider from '@material-ui/core/Divider';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Icon from '@material-ui/core/Icon';\nimport StepIcon from '@material-ui/core/StepIcon';\nimport IconButton from '@material-ui/core/IconButton';\nimport { useTransition, animated } from 'react-spring';\nimport TotalHeader from './total-header';\nimport { useDistance } from './voyageur-sync';\n\nfunction getMilesFromMeters(meters) {\n  return (meters * 0.000621371192).toFixed(2);\n}\n\nexport default function TargetList({\n  items,\n  removeFromTarget,\n  clearItems,\n  targetListRef,\n  classes,\n}) {\n  const { totalMeters, isLoading, isError } = useDistance(items);\n  const totalDistance = getMilesFromMeters(totalMeters);\n  // We pad the bottom of the list to get the remove animation to look good\n  const fakeItem = {\n    id: 'abcdefghijklmnop',\n    targetItemId: 'abcdefghijklmnop',\n    label: '',\n  };\n  const paddedItems = [...items, fakeItem];\n  const slideInTransitions = useTransition(\n    paddedItems,\n    item => item.targetItemId,\n    {\n      config: { clamp: true, friction: 20 },\n      from: {\n        opacity: 0,\n        transform: 'translate3d(-100%,0,0)',\n        maxHeight: '50px',\n      },\n      enter: {\n        opacity: 1,\n        transform: 'translate3d(0%,0,0)',\n        maxHeight: '50px',\n      },\n      leave: () => async next => {\n        await next({ opacity: 0, transform: 'translate3d(50%,0,0)' });\n        await next({ maxHeight: '0em' });\n      },\n    },\n  );\n\n  const itemElements = slideInTransitions.map(({ item, props, key }, index) => (\n    <animated.div key={key} style={props}>\n      <TargetListItem\n        item={item}\n        itemNumber={index}\n        key={item.targetItemId}\n        removeFromTarget={removeFromTarget}\n        classes={classes}>\n        {index < items.length - 1 && (\n          <TargetListItemConnector classes={classes} />\n        )}\n      </TargetListItem>\n    </animated.div>\n  ));\n  return (\n    <Paper elevation={0} square={true} className={classes.targetListBox}>\n      <TotalHeader\n        totalDistance={totalDistance}\n        isLoading={isLoading}\n        isError={isError}\n        clearItems={clearItems}\n        classes={classes}\n      />\n      <Divider className={classes.targetListHeaderDivider} />\n      <List className={classes.targetList} ref={targetListRef}>\n        {itemElements}\n      </List>\n    </Paper>\n  );\n}\n\nfunction TargetListItemConnector({ classes }) {\n  return <div className={classes.targetListItemConnector}> </div>;\n}\n\nfunction TargetListItem({\n  item,\n  itemNumber,\n  removeFromTarget,\n  classes,\n  children,\n}) {\n  if (!item.label) {\n    return (\n      <ListItem className={classes.targetListItemEmpty}>\n        <ListItemText> </ListItemText>\n      </ListItem>\n    );\n  }\n  return (\n    <ListItem className={classes.targetListItem}>\n      <StepIcon\n        classes={{ root: classes.targetListItemDot }}\n        icon={itemNumber + 1}\n      />\n      <ListItemText>{item.label}</ListItemText>\n      {children}\n      <ListItemSecondaryAction>\n        <IconButton\n          size=\"small\"\n          aria-label=\"remove\"\n          className={classes.removeButton}\n          onClick={() => removeFromTarget(item)}>\n          <Icon>remove_circle</Icon>\n        </IconButton>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n}\n","/* @format */\n\nimport { useState, useEffect } from 'react';\n\nexport default function useKeyCode(keyCode) {\n  const [isKeyPressed, setKeyPressed] = useState();\n  // Only allow fetching each keypress event once to prevent infinite loops\n  if (isKeyPressed) {\n    setKeyPressed(false);\n  }\n\n  useEffect(() => {\n    function downHandler(event) {\n      if (event.keyCode === keyCode) {\n        event.preventDefault();\n        setKeyPressed(true);\n      }\n    }\n    window.addEventListener('keydown', downHandler);\n    return () => window.removeEventListener('keydown', downHandler);\n  }, [keyCode]);\n\n  return isKeyPressed;\n}\n\nexport function clamp(value, min, max) {\n  if (value < min) {\n    return min;\n  }\n  if (max !== null && value > max) {\n    return max;\n  }\n  return value;\n}\n","/* @format */\nimport React, { useState, useEffect, useRef } from 'react';\nimport Card from '@material-ui/core/Paper';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\nimport useKeyCode, { clamp } from './use-key-code';\n\nexport default function SourceList({\n  items,\n  sourceListRef,\n  sendToTarget,\n  showItemDetail,\n  shouldShowGuide,\n  createNewItem,\n  isLoading,\n  isError,\n  active,\n  classes,\n}) {\n  const [searchValue, setSearchValue] = useState('');\n  const [highlighted, setHighlighted] = useState(0);\n  const [visibleItems, setVisibleItems] = useState(items);\n  useEffect(() => {\n    setVisibleItems(\n      items.filter(item => doesItemMatchSearch(item, searchValue)),\n    );\n  }, [items, searchValue]);\n  const moveDown = useKeyCode(40);\n  const moveUp = useKeyCode(38);\n  const chooseCurrent = useKeyCode(13);\n  if (moveDown) {\n    active &&\n      setHighlighted(prev => clamp(prev + 1, 0, visibleItems.length - 1));\n  }\n  if (moveUp) {\n    active && setHighlighted(prev => clamp(prev - 1, 0));\n  }\n  if (chooseCurrent) {\n    active && sendToTarget(visibleItems[highlighted]);\n  }\n  useEffect(() => setHighlighted(0), [visibleItems]);\n\n  const highlightedItem = visibleItems.reduce(\n    (found, item, index) => (index === highlighted ? item : found),\n    { id: null },\n  );\n\n  const itemElements = items.map(item => (\n    <SourceListItem\n      item={item}\n      key={item.id}\n      sendToTarget={sendToTarget}\n      showItemDetail={showItemDetail}\n      hidden={!doesItemMatchSearch(item, searchValue)}\n      highlighted={highlightedItem.id === item.id}\n      classes={classes}\n    />\n  ));\n  const onSearchChange = event => setSearchValue(event.target.value);\n  const searchItem = (\n    <SourceListSearch\n      classes={classes}\n      onChange={onSearchChange}\n      value={searchValue}\n      key=\"search-element\"\n    />\n  );\n  const guideElement = (\n    <GuideElement key=\"guide-element\" classes={classes} items={items} />\n  );\n  const addButton = (\n    <IconButton\n      classes={{ root: classes.sourceListAddButton }}\n      color=\"inherit\"\n      aria-label=\"add new place\"\n      onClick={createNewItem}>\n      <Icon fontSize=\"large\">add_circle</Icon>\n    </IconButton>\n  );\n  const itemsWithSearch = shouldShowGuide\n    ? [searchItem, ...itemElements, guideElement]\n    : [searchItem, ...itemElements];\n\n  return (\n    <Card elevation={1} className={classes.sourceListBox}>\n      <CardHeader\n        classes={{\n          content: classes.sourceListHeaderContent,\n        }}\n        title=\"Places\"\n        subheader={addButton}\n      />\n      <Divider />\n      <LocationList\n        ref={sourceListRef}\n        classes={classes}\n        itemsWithSearch={itemsWithSearch}\n        items={items}\n        isLoading={isLoading}\n        isError={isError}\n      />\n    </Card>\n  );\n}\n\nfunction LocationList({\n  classes,\n  itemsWithSearch,\n  items,\n  isLoading,\n  isError,\n  ref,\n}) {\n  if (isError) {\n    return <SourceListError classes={classes} />;\n  }\n  if (isLoading) {\n    return <SourceListLoading classes={classes} />;\n  }\n  return items.length ? (\n    <List ref={ref} className={classes.sourceList}>\n      {itemsWithSearch}\n    </List>\n  ) : (\n    <EmptyLocationsList classes={classes} />\n  );\n}\n\nfunction SourceListLoading({ classes }) {\n  return (\n    <div className={classes.emptyLocationsList}>\n      <Icon fontSize=\"large\" className={classes.emptyLocationsListIcon}>\n        emoji_transportation\n      </Icon>\n      <div className={classes.emptyLocationsListTitle}>Loading...</div>\n      <p>Just a moment.</p>\n    </div>\n  );\n}\n\nfunction SourceListError({ classes }) {\n  return (\n    <div className={classes.emptyLocationsList}>\n      <Icon fontSize=\"large\" className={classes.emptyLocationsListIcon}>\n        error_outline\n      </Icon>\n      <div className={classes.emptyLocationsListTitle}>Sorry</div>\n      <p>{\"I wasn't able to connect to the server. Try reloading the page.\"}</p>\n    </div>\n  );\n}\n\nfunction GuideElement({ classes, items }) {\n  if (items.length === 1) {\n    return (\n      <div className={classes.guideElement}>\n        <div className={classes.guideElementTitle}>Almost there!</div>\n        <Icon fontSize=\"large\">thumb_up</Icon>\n        <p>Add another place and then you can start finding distances!</p>\n      </div>\n    );\n  }\n  return (\n    <div className={classes.guideElement}>\n      <div className={classes.guideElementTitle}>Start your trip!</div>\n      <Icon fontSize=\"large\">thumb_up</Icon>\n      <p>Click the icons above to add places to your trip.</p>\n    </div>\n  );\n}\n\nfunction EmptyLocationsList({ classes }) {\n  return (\n    <div className={classes.emptyLocationsList}>\n      <Icon fontSize=\"large\" className={classes.emptyLocationsListIcon}>\n        emoji_transportation\n      </Icon>\n      <div className={classes.emptyLocationsListTitle}>No places yet!</div>\n      <p>Add a place and it will appear here.</p>\n    </div>\n  );\n}\n\nfunction SourceListItem({\n  item,\n  sendToTarget,\n  showItemDetail,\n  hidden,\n  highlighted,\n  classes,\n}) {\n  const onClick = () => showItemDetail(item);\n  const ref = useRef();\n\n  useEffect(() => {\n    highlighted &&\n      ref.current &&\n      ref.current.scrollIntoView({\n        block: 'end',\n        behavior: 'smooth',\n      });\n  }, [highlighted]);\n\n  return (\n    <ListItem\n      className={classes.sourceListItem}\n      ContainerProps={hidden ? { className: classes.sourceListItemHidden } : {}}\n      button\n      selected={highlighted}\n      onClick={onClick}\n      ref={ref}>\n      <ListItemText primary={item.label} secondary={item.address} />\n      <ListItemSecondaryAction>\n        <IconButton\n          size=\"small\"\n          aria-label=\"add\"\n          className={classes.sourceListItemButton}\n          onClick={() => sendToTarget(item)}>\n          <Icon fontSize=\"large\">add_box</Icon>\n        </IconButton>\n      </ListItemSecondaryAction>\n    </ListItem>\n  );\n}\n\nfunction SourceListSearch({ value, onChange, classes }) {\n  const label = (\n    <>\n      <Icon fontSize=\"small\" className={classes.searchIcon}>\n        search\n      </Icon>\n      Search\n    </>\n  );\n  return (\n    <ListItem>\n      <TextField\n        id=\"search\"\n        label={label}\n        type=\"search\"\n        fullWidth\n        value={value}\n        onChange={onChange}\n        autoComplete=\"off\"\n      />\n    </ListItem>\n  );\n}\n\nfunction doesItemMatchSearch(item, searchValue) {\n  const { label = '', address = '' } = item;\n  return (\n    label.toLowerCase().includes(searchValue.toLowerCase()) ||\n    address.toLowerCase().includes(searchValue.toLowerCase())\n  );\n}\n","/* @format */\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CloseIcon from '@material-ui/icons/Close';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Paper from '@material-ui/core/Paper';\nimport React, { useState, useEffect } from 'react';\nimport Slide from '@material-ui/core/Slide';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport useKeyCode, { clamp } from './use-key-code';\nimport { useNotices } from './notices';\n\nimport google from './google.png';\n\nexport default function ItemDetail({\n  item,\n  onClose,\n  newItem,\n  deleteItem,\n  isLocationEnabled,\n  setLocationEnabled,\n  classes,\n}) {\n  return (\n    <Dialog\n      open={!!item || newItem}\n      fullScreen\n      onClose={onClose}\n      TransitionComponent={SlideTransition}>\n      <ItemDetailContent\n        item={item || { label: '', id: '' }}\n        onClose={onClose}\n        newItem={newItem}\n        classes={classes}\n        deleteItem={deleteItem}\n        isLocationEnabled={isLocationEnabled}\n        setLocationEnabled={setLocationEnabled}\n      />\n    </Dialog>\n  );\n}\n\nfunction ItemDetailContent({\n  item,\n  onClose,\n  newItem,\n  deleteItem,\n  isLocationEnabled,\n  setLocationEnabled,\n  classes,\n}) {\n  const { showError } = useNotices();\n  const [address, setAddress] = useState(item.address || '');\n  const [itemName, setItemName] = useState(item.label);\n  const [isShowingDeleteConfirm, setIsShowingDeleteConfirm] = useState(false);\n  useEffect(() => {\n    setItemName(item.label);\n  }, [item]);\n\n  const confirmDelete = () => {\n    setIsShowingDeleteConfirm(true);\n  };\n  const handleCloseDeleteDialog = action => {\n    setIsShowingDeleteConfirm(false);\n    if (action === 'delete') {\n      deleteItem();\n    }\n  };\n  const saveChanges = () => {\n    if (!itemName || !address) {\n      showError('Both name and address are required');\n      return;\n    }\n    if (newItem) {\n      onClose({ newItem: { label: itemName, address } });\n      return;\n    }\n    onClose({ updatedItem: { ...item, label: itemName, address } });\n  };\n\n  return (\n    <React.Fragment>\n      <AppBar className={classes.itemDetailAppBar}>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            color=\"inherit\"\n            onClick={onClose}\n            aria-label=\"close\">\n            <CloseIcon />\n          </IconButton>\n          <DialogTitle className={classes.itemDetailTitle}>\n            {newItem ? 'Add Location' : 'Edit Location'}\n          </DialogTitle>\n          {newItem ? null : (\n            <Button color=\"inherit\" aria-label=\"delete\" onClick={confirmDelete}>\n              <DeleteIcon className={classes.itemDetailButtonIcon} />\n              delete\n            </Button>\n          )}\n          <Button aria-label=\"save\" color=\"inherit\" onClick={saveChanges}>\n            <SaveIcon className={classes.itemDetailButtonIcon} />\n            save\n          </Button>\n        </Toolbar>\n      </AppBar>\n      <DialogContent>\n        <div>\n          <NameField value={itemName} onChange={setItemName} />\n        </div>\n        <div className={classes.addressFieldContainer}>\n          <AddressAutosuggestInput\n            value={address}\n            onChange={setAddress}\n            classes={classes}\n            isLocationEnabled={isLocationEnabled}\n            setLocationEnabled={setLocationEnabled}\n          />\n        </div>\n        <PoweredByGoogle classes={classes} />\n      </DialogContent>\n      <ConfirmDeleteDialog\n        open={isShowingDeleteConfirm}\n        handleClose={handleCloseDeleteDialog}\n      />\n    </React.Fragment>\n  );\n}\n\nfunction ConfirmDeleteDialog({ open, handleClose }) {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"alert-dialog-title\"\n      aria-describedby=\"alert-dialog-description\">\n      <DialogTitle id=\"alert-dialog-title\">\n        {'Are you sure you want to delete this location?'}\n      </DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          {\n            \"Deleted locations cannot be restored (you'll have to add it again if you want it back). Deleting a location that's already in your trip will not remove the location from that trip.\"\n          }\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleClose()} color=\"primary\">\n          Keep it\n        </Button>\n        <Button onClick={() => handleClose('delete')} color=\"primary\" autoFocus>\n          Delete it\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nfunction NameField({ value, onChange }) {\n  const [isTouched, setTouched] = useState(false);\n  const handleChange = event => {\n    setTouched(true);\n    onChange(event.target.value);\n  };\n  return (\n    <TextField\n      id=\"item-name\"\n      label=\"Name\"\n      margin=\"normal\"\n      fullWidth\n      value={value}\n      onChange={handleChange}\n      error={isTouched && !value}\n    />\n  );\n}\n\nfunction PoweredByGoogle({ classes }) {\n  return (\n    <div>\n      <img\n        src={google}\n        className={classes.PoweredByGoogle}\n        alt=\"Powered by Google\"\n      />\n    </div>\n  );\n}\n\nfunction useDebounce(value, delay) {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  React.useEffect(() => {\n    const handler = setTimeout(() => {\n      console.log('setTimeout');\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n}\n\nfunction getSuggestionsFor({ service, input, location }) {\n  return new Promise(resolve => {\n    if (!input || input.length < 4) {\n      return [];\n    }\n    console.log('looking for', input);\n    const translatePredictions = predictions => {\n      console.log('got', predictions);\n      if (!predictions) {\n        return resolve([]);\n      }\n      resolve(predictions.map(({ description }) => ({ label: description })));\n    };\n    const queryOptions = { input };\n    if (location) {\n      queryOptions.location = location;\n      queryOptions.radius = 1000;\n    }\n    service.getQueryPredictions(queryOptions, translatePredictions);\n  });\n}\n\nfunction useGoogleApi() {\n  const [google, setGoogle] = useState();\n  const onLoad = () => {\n    if (!window.google) {\n      alert('no google even after load');\n      return;\n    }\n    console.log('setGoogle');\n    setGoogle(window.google);\n  };\n  useEffect(() => {\n    if (!window.google) {\n      const script = document.createElement(`script`);\n      script.type = `text/javascript`;\n      const GOOGLE_API_KEY = 'AIzaSyAz7PGr8-sO1qOXibw8Q4aLPjrsRj6ONzs';\n      script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_API_KEY}&libraries=places`;\n      const headScript = document.getElementsByTagName(`script`)[0];\n      headScript.parentNode.insertBefore(script, headScript);\n      script.addEventListener('load', onLoad);\n      return () => script.removeEventListener(`load`, onLoad);\n    } else onLoad();\n  }, []);\n  return google;\n}\n\nfunction useGoogleAutocomplete({ google }) {\n  const [service, setService] = useState();\n  useEffect(() => {\n    console.log('setService');\n    google && setService(new google.maps.places.AutocompleteService());\n  }, [google]);\n  return service;\n}\n\nfunction useCurrentGoogleLocation({ google, enabled }) {\n  const [location, setLocation] = useState();\n  useEffect(() => {\n    let isSubscribed = true;\n    google &&\n      enabled &&\n      navigator.geolocation.getCurrentPosition(position => {\n        console.log('setLocation');\n        isSubscribed &&\n          setLocation(\n            new google.maps.LatLng(\n              position.coords.latitude,\n              position.coords.longitude,\n            ),\n          );\n      });\n    return () => (isSubscribed = false);\n  }, [google, enabled]);\n  return location;\n}\n\nfunction useAutocompleteValue({ search, service, location }) {\n  const [suggestions, setSuggestions] = useState([]);\n  useEffect(() => {\n    console.log('beginning search for', search);\n    if (service && search) {\n      getSuggestionsFor({ input: search, service, location }).then(\n        suggestions => {\n          console.log('I am about to set suggestions');\n          setSuggestions(suggestions);\n        },\n      );\n    }\n  }, [service, search, location]);\n  const clearSuggestions = () => setSuggestions([]);\n  return { suggestions, clearSuggestions };\n}\n\nfunction AddressAutosuggestInput({\n  value,\n  classes,\n  onChange,\n  isLocationEnabled,\n  setLocationEnabled,\n}) {\n  const debouncedValue = useDebounce(value, 500);\n  const [isTouched, setTouched] = useState();\n  const google = useGoogleApi();\n  const service = useGoogleAutocomplete({ google });\n  const location = useCurrentGoogleLocation({\n    google,\n    enabled: isLocationEnabled,\n  });\n  const { suggestions, clearSuggestions } = useAutocompleteValue({\n    // only search if typing has started\n    search: isTouched ? debouncedValue : '',\n    service,\n    location,\n  });\n  const onType = event => {\n    console.log('onType');\n    setTouched(true);\n    onChange(event.target.value);\n    clearSuggestions();\n  };\n  const onChoose = value => {\n    console.log('onChoose');\n    onChange(value);\n    setTouched(false);\n    clearSuggestions();\n  };\n\n  return (\n    <React.Fragment>\n      <TextField\n        id=\"item-address\"\n        label=\"Address\"\n        margin=\"normal\"\n        fullWidth\n        value={value}\n        onChange={onType}\n        autoComplete=\"off\"\n        error={isTouched && !value}\n      />\n      {suggestions && (\n        <SuggestionList\n          suggestions={suggestions}\n          clearSuggestions={clearSuggestions}\n          onChange={onChoose}\n          classes={classes}\n        />\n      )}\n      <FormControlLabel\n        control={\n          <Checkbox\n            checked={isLocationEnabled}\n            onChange={() => setLocationEnabled(!isLocationEnabled)}\n            value=\"isLocationEnabled\"\n          />\n        }\n        label=\"Use current location to improve autocomplete\"\n      />\n    </React.Fragment>\n  );\n}\n\nfunction SuggestionList({ suggestions, onChange, classes }) {\n  const [highlighted, setHighlighted] = useState(0);\n  const moveDown = useKeyCode(40);\n  const moveUp = useKeyCode(38);\n  const chooseCurrent = useKeyCode(13);\n  if (moveDown) {\n    setHighlighted(prev => clamp(prev + 1, 0, suggestions.length - 1));\n  }\n  if (moveUp) {\n    setHighlighted(prev => clamp(prev - 1, 0));\n  }\n  if (chooseCurrent) {\n    console.log('adding current suggestion');\n    suggestions[highlighted] && onChange(suggestions[highlighted].label);\n  }\n  return (\n    <Paper square className={classes.suggestionList}>\n      {suggestions.map((suggestion, index) => (\n        <SuggestionItem\n          key={index}\n          suggestion={suggestion}\n          onChange={onChange}\n          isHighlighted={highlighted === index}\n        />\n      ))}\n    </Paper>\n  );\n}\n\nfunction SuggestionItem({ suggestion, isHighlighted, onChange }) {\n  const onClick = () => onChange(suggestion.label);\n  return (\n    <MenuItem selected={isHighlighted} component=\"div\" onClick={onClick}>\n      {suggestion.label}\n    </MenuItem>\n  );\n}\n\nconst SlideTransition = React.forwardRef(function Transition(props, ref) {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n","/* @format */\nimport React, { useRef, useState } from 'react';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Icon from '@material-ui/core/Icon';\nimport Typography from '@material-ui/core/Typography';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\n\nexport default function MainToolbar({ classes, logOut }) {\n  const accountMenuRef = useRef();\n  const [accountMenuOpen, setAccountMenuOpen] = useState(false);\n  const onAccountMenuClick = () => setAccountMenuOpen(true);\n  const onAccountMenuClose = () => setAccountMenuOpen(false);\n  return (\n    <AppBar position=\"relative\" className={classes.mainToolbar}>\n      <Toolbar className={classes.mainToolbarToolbar}>\n        <Typography variant=\"h6\" className={classes.mainToolbarTitle}>\n          Voyageur\n        </Typography>\n        <IconButton\n          aria-label=\"account of current user\"\n          aria-controls=\"menu-appbar\"\n          aria-haspopup=\"true\"\n          onClick={onAccountMenuClick}\n          ref={accountMenuRef}\n          color=\"inherit\">\n          <Icon fontSize=\"large\">account_circle</Icon>\n        </IconButton>\n        <UserMenu\n          open={accountMenuOpen}\n          targetRef={accountMenuRef}\n          onClose={onAccountMenuClose}\n          logOut={logOut}\n        />\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nfunction UserMenu({ targetRef, open, onClose, logOut }) {\n  return (\n    <Menu\n      id=\"menu-appbar\"\n      anchorEl={targetRef.current}\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      keepMounted\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      open={open}\n      onClose={onClose}>\n      <MenuItem onClick={logOut}>Log out</MenuItem>\n    </Menu>\n  );\n}\n","/* @format */\nimport { useState, useEffect } from 'react';\n\nexport default function useLocalStorageState(initialValue, key) {\n  const [state, setState] = useState(initialValue);\n  useEffect(() => {\n    let storedValue;\n    try {\n      storedValue = window.localStorage.getItem(key);\n      if (storedValue) {\n        setState(JSON.parse(storedValue));\n      }\n    } catch (error) {\n      console.log('reading local state failed', error);\n      return;\n    }\n  }, [key]);\n  function setAndSaveState(newValue) {\n    if (typeof newValue === 'function') {\n      newValue = newValue(state);\n    }\n    try {\n      const encodedValue = JSON.stringify(newValue);\n      console.log('saving local state', newValue, 'to key', key);\n      window.localStorage.setItem(key, encodedValue);\n    } catch (error) {\n      console.log('saving local state failed', error);\n    }\n    setState(newValue);\n  }\n  return [state, setAndSaveState];\n}\n","/* @format */\nimport { useEffect, useRef } from 'react';\n\nexport default function useScrollToItem(items, listRef) {\n  const prevSavedItems = useRef(items);\n  useEffect(() => {\n    if (!listRef.current) {\n      console.log('cannot scroll; no ref');\n      return;\n    }\n    if (items.length <= prevSavedItems.current.length) {\n      console.log('cannot scroll; no change');\n      return;\n    }\n    prevSavedItems.current = items;\n    listRef.current.lastElementChild.scrollIntoView({\n      block: 'start',\n      behavior: 'smooth',\n    });\n  }, [listRef, items]);\n}\n","/* @format */\nimport Container from '@material-ui/core/Container';\nimport React, { useState, useEffect, useRef } from 'react';\nimport TargetList from './target-list';\nimport SourceList from './source-list';\nimport ItemDetail from './item-detail';\nimport MainToolbar from './main-toolbar';\nimport useVoyageurSync from './voyageur-sync';\nimport useLocalStorageState from './local-storage';\nimport useScrollToItem from './scroll-to-item';\n\nexport default function LoggedIn({ classes, logOut }) {\n  const [items, setItems, isLoading, isError] = useVoyageurSync();\n\n  const [tripLocations, setTripLocations] = useLocalStorageState(\n    [],\n    'voyageurTripLocations',\n  );\n  const [itemDetail, showItemDetail] = useState();\n  const [isShowingAddItem, setIsShowingAddItem] = useState(false);\n  const targetListRef = useRef();\n  useScrollToItem(tripLocations, targetListRef);\n  const sourceListRef = useRef();\n  useScrollToItem(items, sourceListRef); // FIXME: make this work\n  const [shouldShowGuide, setShowGuide] = useLocalStorageState(\n    true,\n    'voyageurSeenGuide',\n  );\n  useEffect(() => {\n    if (tripLocations.length > 1) {\n      setShowGuide(false);\n    }\n  }, [setShowGuide, tripLocations]);\n  const [isLocationEnabled, setLocationEnabled] = useLocalStorageState(\n    false,\n    'voyageurIsLocationEnabled',\n  );\n\n  const sendToTarget = item => {\n    const targetItem = { ...item, targetItemId: uniqueId() };\n    setTripLocations(saved => [...saved, targetItem]);\n  };\n  const removeFromTarget = item =>\n    setTripLocations(\n      tripLocations.filter(it => it.targetItemId !== item.targetItemId),\n    );\n  const updateItem = updatedItem => {\n    console.log('updating item', updatedItem);\n    setItems(\n      items.map(it => {\n        if (it.id === updatedItem.id) {\n          return updatedItem;\n        }\n        return it;\n      }),\n    );\n  };\n  const addNewItem = newItem => {\n    newItem.id = uniqueId();\n    setItems([...items, newItem]);\n  };\n  const onClose = ({ updatedItem, newItem }) => {\n    showItemDetail();\n    setIsShowingAddItem(false);\n    updatedItem && updateItem(updatedItem);\n    newItem && addNewItem(newItem);\n  };\n  const createNewItem = () => {\n    setIsShowingAddItem(true);\n  };\n  const deleteItem = () => {\n    console.log('deleting item', itemDetail);\n    setItems(items.filter(item => item.id !== itemDetail.id));\n    showItemDetail();\n    setIsShowingAddItem(false);\n  };\n  const clearItems = () => setTripLocations([]);\n  const isOverlayVisible = isShowingAddItem || itemDetail;\n\n  return (\n    <Container className={classes.loggedInRoot}>\n      <MainToolbar classes={classes} logOut={logOut} />\n      <Container className={classes.loggedInMainContainer}>\n        <TargetList\n          items={tripLocations}\n          removeFromTarget={removeFromTarget}\n          targetListRef={targetListRef}\n          clearItems={clearItems}\n          classes={classes}\n        />\n        <SourceList\n          isLoading={isLoading}\n          isError={isError}\n          items={items}\n          sourceListRef={sourceListRef}\n          sendToTarget={sendToTarget}\n          showItemDetail={showItemDetail}\n          shouldShowGuide={shouldShowGuide}\n          createNewItem={createNewItem}\n          active={!isOverlayVisible}\n          classes={classes}\n        />\n        <ItemDetail\n          item={itemDetail}\n          onClose={onClose}\n          newItem={isShowingAddItem}\n          deleteItem={deleteItem}\n          isLocationEnabled={isLocationEnabled}\n          setLocationEnabled={setLocationEnabled}\n          classes={classes}\n        />\n      </Container>\n    </Container>\n  );\n}\n\nfunction uniqueId() {\n  return (\n    Date.now() +\n    Math.random()\n      .toString()\n      .slice(2)\n  );\n}\n","/* @format */\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles(theme => {\n  return {\n    loggedInRoot: {\n      backgroundColor: theme.palette.primary.dark,\n      padding: '0',\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      maxHeight: '100vh',\n    },\n    loggedInMainContainer: {\n      backgroundColor: theme.palette.primary.dark,\n      padding: '0',\n      position: 'relative',\n      display: 'flex',\n      flexDirection: 'column',\n      flex: 1,\n      maxHeight: '100%',\n      height: '100%',\n      [theme.breakpoints.up('md')]: {\n        flexDirection: 'row',\n        maxWidth: '100%',\n      },\n    },\n    mainToolbar: {\n      backgroundColor: theme.palette.primary.main,\n    },\n    mainToolbarToolbar: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    targetListBox: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      overflowY: 'hidden',\n      backgroundColor: theme.palette.primary.dark,\n      color: theme.palette.primary.contrastText,\n      [theme.breakpoints.up('md')]: {\n        order: 3,\n      },\n    },\n    targetList: {\n      padding: '0',\n      overflowY: 'scroll',\n      overflowX: 'hidden',\n      WebkitOverflowScrolling: 'touch',\n    },\n    sourceListBox: {\n      flex: 2,\n      overflowY: 'hidden',\n      display: 'flex',\n      position: 'relative',\n      flexDirection: 'column',\n      borderBottomRightRadius: 0,\n      borderBottomLeftRadius: 0,\n      height: '100%',\n      [theme.breakpoints.up('md')]: {\n        order: 2,\n        borderBottomRightRadius: theme.shape.borderRadius,\n        borderTopLeftRadius: 0,\n        borderBottomLeftRadius: 0,\n      },\n    },\n    sourceList: {\n      overflowY: 'scroll',\n      WebkitOverflowScrolling: 'touch',\n    },\n    removeButton: {\n      color: theme.palette.primary.contrastText,\n    },\n    targetListHeaderDivider: {\n      backgroundColor: theme.palette.primary.contrastText,\n    },\n    targetListItemEmpty: {\n      minHeight: '0.5em',\n    },\n    targetListItemConnector: {\n      position: 'absolute',\n      minHeight: '1em',\n      borderRight: `1px solid ${theme.palette.primary.contrastText}`,\n      left: 0,\n      top: '3em',\n      paddingLeft: '2.5em',\n    },\n    targetListItemDot: {\n      padding: '0.5em',\n    },\n    sourceListItemButton: {\n      color: theme.palette.primary.dark,\n    },\n    sourceListItem: {\n      borderBottom: '1px solid rgba(0, 0, 0, 0.14)',\n      backgroundClip: 'padding-box',\n    },\n    sourceListItemHidden: {\n      display: 'none',\n    },\n    itemDetailAppBar: {\n      position: 'relative',\n    },\n    itemDetailTitle: {\n      flex: '1',\n    },\n    itemDetailButtonIcon: {\n      marginRight: theme.spacing(1),\n    },\n    sourceListAddButton: {\n      padding: '0',\n      color: theme.palette.primary.main,\n    },\n    sourceListHeaderContent: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    totalHeaderDistance: {\n      color: theme.palette.primary.contrastText,\n      fontSize: '1.4em',\n    },\n    totalHeaderContent: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    totalHeaderIcon: {\n      verticalAlign: 'bottom',\n      marginRight: '10px',\n    },\n    totalHeaderButton: {\n      padding: '0',\n      color: theme.palette.primary.contrastText,\n    },\n    addressFieldContainer: {\n      position: 'relative',\n    },\n    suggestionList: {\n      position: 'absolute',\n      zIndex: 10,\n      width: '100%',\n    },\n    container: {\n      position: 'relative',\n    },\n    suggestionsContainerOpen: {\n      position: 'absolute',\n      zIndex: 1,\n      left: 0,\n      right: 0,\n    },\n    PoweredByGoogle: {\n      marginTop: '1em',\n    },\n    loggedOutLogo: {\n      display: 'inline',\n      width: '3em',\n      height: '3em',\n      padding: '16px',\n    },\n    topLogo: {\n      display: 'inline',\n      width: '3em',\n      [theme.breakpoints.up('md')]: {\n        display: 'none',\n      },\n    },\n    bottomLogo: {\n      margin: 'auto 0.5em 0.5em 0.5em',\n      padding: '0.5em',\n      display: 'none',\n      [theme.breakpoints.up('md')]: {\n        display: 'inline',\n        width: '4em',\n        order: 4,\n      },\n    },\n    searchIcon: {\n      verticalAlign: 'sub',\n      marginRight: '2px',\n    },\n    loggedOutRoot: {\n      backgroundColor: theme.palette.primary.dark,\n      padding: '0',\n      position: 'relative',\n      display: 'flex',\n      justifyContent: 'space-around',\n      alignItems: 'center',\n      flexDirection: 'column',\n      height: '100vh',\n      maxWidth: '100%',\n      [theme.breakpoints.up('md')]: {\n        flexDirection: 'row',\n      },\n    },\n    loggedOut: {\n      minWidth: '300px',\n      boxSizing: 'border-box',\n      padding: '0 1em 1.5em 1em',\n      [theme.breakpoints.up('md')]: {\n        minWidth: '400px',\n      },\n    },\n    loggedOutHeader: {\n      display: 'flex',\n      justifyContent: 'space-between',\n    },\n    noticeBox: {\n      [theme.breakpoints.up('sm')]: {\n        minWidth: 'auto',\n      },\n    },\n    noticeError: {\n      backgroundColor: theme.palette.error.dark,\n    },\n    noticeInfo: {\n      backgroundColor: theme.palette.primary.main,\n    },\n    loggedOutError: {\n      padding: '16px',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    loading: {\n      padding: '16px',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n    },\n    guideElement: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      flexDirection: 'column',\n      padding: '1em',\n    },\n    guideElementTitle: {\n      fontWeight: 'bold',\n    },\n    emptyLocationsList: {\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: '100%',\n      flexDirection: 'column',\n    },\n    emptyLocationsListTitle: {\n      fontWeight: 'bold',\n    },\n    emptyLocationsListIcon: {\n      fontSize: '6rem',\n      [theme.breakpoints.up('md')]: {\n        fontSize: '14rem',\n      },\n    },\n  };\n});\n\nexport default useStyles;\n","/* @format */\nimport React from 'react';\nimport LoggedOut from './logged-out';\nimport LoggedIn from './logged-in';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { useAuth0 } from './react-auth0-wrapper';\nimport { NoticesProvider, Notices } from './notices';\nimport Container from '@material-ui/core/Container';\nimport Card from '@material-ui/core/Paper';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Logo from './logo';\n\nimport './app.css';\nimport useStyles from './style';\n\nconst voyageurBlue = {\n  main: '#5989c1',\n  dark: '#225c90',\n  light: '#8bb9f4',\n  contrastText: '#ffffff',\n};\n\nconst voyageurGrey = {\n  main: '#343435',\n  dark: '#0d0d0f',\n  light: '#5e5e5f',\n  contrastText: '#ffffff',\n};\n\n// This is required to be a separate component above the component which uses\n// `useStyles()` for the theme to work\nexport default function AppContainer() {\n  const theme = createMuiTheme({\n    palette: { primary: voyageurBlue, secondary: voyageurGrey },\n  });\n  return (\n    <ThemeProvider theme={theme}>\n      <App />\n    </ThemeProvider>\n  );\n}\n\nexport function App() {\n  const {\n    isAuthenticated,\n    loginWithRedirect,\n    logout,\n    loading,\n    loginError,\n  } = useAuth0();\n  const classes = useStyles();\n  return (\n    <NoticesProvider>\n      <MainArea\n        loading={loading}\n        isAuthenticated={isAuthenticated}\n        logout={logout}\n        loginWithRedirect={loginWithRedirect}\n        loginError={loginError}\n        classes={classes}\n      />\n      <Notices classes={classes} />\n    </NoticesProvider>\n  );\n}\n\nfunction MainArea({\n  loading,\n  isAuthenticated,\n  logout,\n  loginWithRedirect,\n  loginError,\n  classes,\n}) {\n  if (loading) {\n    return (\n      <Container className={classes.loggedOutRoot}>\n        <Card elevation={1} className={classes.loggedOut}>\n          <div className={classes.loggedOutHeader}>\n            <CardHeader title=\"Voyageur\" subheader=\"Log In\" />\n            <Logo className={classes.loggedOutLogo} />\n          </div>\n          <Divider />\n          <div className={classes.loading}>\n            <CircularProgress />\n          </div>\n        </Card>\n      </Container>\n    );\n  }\n  if (isAuthenticated) {\n    return (\n      <LoggedIn\n        classes={classes}\n        logOut={() => logout({ returnTo: window.location.href })}\n      />\n    );\n  }\n  return (\n    <LoggedOut\n      classes={classes}\n      loginError={loginError}\n      logIn={() => loginWithRedirect({})}\n    />\n  );\n}\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n      navigator.serviceWorker\n        .register(swUrl)\n        .then(registration => {\n          // eslint-disable-next-line no-param-reassign\n          registration.onupdatefound = () => {\n            const installingWorker = registration.installing;\n            installingWorker.onstatechange = () => {\n              if (installingWorker.state === 'installed') {\n                if (navigator.serviceWorker.controller) {\n                  // At this point, the old content will have been purged and\n                  // the fresh content will have been added to the cache.\n                  // It's the perfect time to display a \"New content is\n                  // available; please refresh.\" message in your web app.\n                  console.log('New content is available; please refresh.'); // eslint-disable-line no-console\n                } else {\n                  // At this point, everything has been precached.\n                  // It's the perfect time to display a\n                  // \"Content is cached for offline use.\" message.\n                  console.log('Content is cached for offline use.'); // eslint-disable-line no-console\n                }\n              }\n            };\n          };\n        })\n        .catch(error => {\n          console.error('Error during service worker registration:', error);\n        });\n    });\n  }\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/* @format */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\nimport { Auth0Provider } from './react-auth0-wrapper';\nimport { AUTH0_CLIENT_ID, AUTH0_DOMAIN, AUTH0_AUDIENCE } from './private-vars';\nimport registerServiceWorker from './createServiceWorker';\n\nregisterServiceWorker();\n\n// A function that routes the user to the right place\n// after login\nconst onRedirectCallback = appState => {\n  window.history.replaceState(\n    {},\n    document.title,\n    appState && appState.targetUrl\n      ? appState.targetUrl\n      : window.location.pathname,\n  );\n};\n\nReactDOM.render(\n  <Auth0Provider\n    domain={AUTH0_DOMAIN}\n    client_id={AUTH0_CLIENT_ID}\n    redirect_uri={window.location.origin}\n    audience={AUTH0_AUDIENCE}\n    onRedirectCallback={onRedirectCallback}>\n    <App />\n  </Auth0Provider>,\n  document.querySelector('#root'),\n);\n","module.exports = __webpack_public_path__ + \"static/media/logo-small.69e7f7dd.png\";","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}